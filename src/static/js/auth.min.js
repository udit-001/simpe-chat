errors={EMAIL_EXISTS:"An account with the provided email already exists, try logging in instead.",WEAK_PASSWORD:"Your password must be at least 6 characters.",INVALID_PASSWORD:"Email or password is incorrect.",INVALID_EMAIL:"Please enter a valid email address.",EMAIL_NOT_FOUND:"We could not found an account for that email address."},document.addEventListener("DOMContentLoaded",function(){function e(){if(pass=document.querySelector("#password-field").value,cpass=document.querySelector("#cpassword-field").value,""!==pass&&""!==cpass)return pass===cpass}function t(){flag=0,document.querySelectorAll("input").forEach(function(e){"login"===document.querySelector("button").id?"cpassword"===e.name||""===e.value&&(flag=1):"register"===document.querySelector("button").id&&""===e.value&&(flag=1),1===flag?document.querySelector("button").disabled=!0:document.querySelector("button").disabled=!1})}document.querySelector("button").onclick=function(){var t=document.querySelector("#username-field").value,o=document.querySelector("#password-field").value;if("login"==document.querySelector("button").id)endpoint="/login";else if("register"==document.querySelector("button").id){if(!e())return void Swal.fire("Oops...","Passwords do not match!","error");if(pass=document.querySelector("#password-field").value,!(pass.length>=6))return void Swal.fire("Oops...","Your password must be at least 6 characters.","error");name=t.replace(/\s\s+/g," ").trim(),/^[a-zA-Z ]{1,18}$/.test(name)||Swal.fire("Oops...","Usernames can only contain alphabets, and be 18 characters long","error"),endpoint="/register"}const r=new XMLHttpRequest;r.open("POST",endpoint),r.onload=function(){const e=JSON.parse(r.responseText);if(e.hasOwnProperty("error"))msg=Object.keys(errors).filter(function(t){if(e.error.includes(t))return errors[t]}),Swal.fire("Oops...",errors[msg[0]],"error");else{const t=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:6e3});t.fire({type:"success",title:e.result})}if(e.success){localStorage.setItem("username",e.username);const t=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:9e3});t.fire({type:"success",title:e.message}),window.location.pathname="/chat"}else Swal.fire("Oops...",e.message,"error");console.log(e)};const n=new FormData;return n.append("username",t),n.append("password",o),r.send(n),!1},document.querySelector("#toggle-button").onclick=function(){"Register Account"==document.querySelector("button").innerText?(document.querySelector("#cpassword-field").style.display="none",document.querySelector("#switch").innerText="Do not",document.querySelector("#toggle-button").innerText="Register here",document.querySelector("button").innerText="Login",document.querySelector("button").id="login",document.querySelector("#username-field").value="",document.querySelector("#password-field").value="",document.querySelector("#cpassword-field").value="",document.querySelector("button").disabled=!0):(document.querySelector("#switch").innerText="Already",document.querySelector("#toggle-button").innerText="Login here",document.querySelector("button").innerText="Register Account",document.querySelector("button").id="register",document.querySelector("#username-field").value="",document.querySelector("#password-field").value="",document.querySelector("#cpassword-field").style.display="block",document.querySelector("button").disabled=!0)},document.querySelector("#username-field").addEventListener("keyup",t),document.querySelector("#password-field").addEventListener("keyup",t),document.querySelector("#cpassword-field").addEventListener("keyup",t)});